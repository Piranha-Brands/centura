{% comment %} First, we hide add to cart for all customers {% endcomment %}

<style>
  .product-form__buttons{
    display: none;
  }
</style>

{% comment %} Here we show/hide add to cart button based on metafields and collections handle {% endcomment %}
{% if customer.metafields.customer_fields.colors.value == product.metafields.base_color.value %}
<style>
  .product-form__buttons{
    display: Block;
  }
</style>
{% endif %}